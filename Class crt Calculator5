MainActivity.java

package com.example.calculatorjis;

import android.os.Bundle;
import android.widget.Button;
import android.widget.TextView;

import androidx.activity.EdgeToEdge;
import androidx.appcompat.app.AppCompatActivity;
import androidx.core.graphics.Insets;
import androidx.core.view.ViewCompat;
import androidx.core.view.WindowInsetsCompat;

public class MainActivity extends AppCompatActivity {

    private TextView display;
    private String currentInput = "";
    private String operator = "";
    private double firstOperand = 0;
    private double secondOperand = 0;
    private boolean isOperatorClicked = false;
    private String expression = "";  // Holds full expression like "12 + "

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        EdgeToEdge.enable(this);
        setContentView(R.layout.activity_main);

        display = findViewById(R.id.display);

        int[] numberButtons = new int[]{
                R.id.button0, R.id.button1, R.id.button2, R.id.button3,
                R.id.button4, R.id.button5, R.id.button6, R.id.button7,
                R.id.button8, R.id.button9
        };

        for (int id : numberButtons) {
            Button button = findViewById(id);
            button.setOnClickListener(v -> onNumberClick(((Button) v).getText().toString()));
        }

        // Operator Buttons
        findViewById(R.id.buttonplus).setOnClickListener(v -> onOperatorClick("+"));
        findViewById(R.id.buttonminus).setOnClickListener(v -> onOperatorClick("-"));
        findViewById(R.id.buttonmul).setOnClickListener(v -> onOperatorClick("*"));
        findViewById(R.id.buttondivide).setOnClickListener(v -> onOperatorClick("/"));

        // Equals Button
        findViewById(R.id.buttonequals).setOnClickListener(v -> onEqualsClick());

        // Clear Button
        findViewById(R.id.buttonC).setOnClickListener(v -> onClearClick());
    }

    private void onNumberClick(String number) {
        // Append number to current input
        currentInput += number;
        if (operator.isEmpty()) {
            // No operator yet, show only currentInput
            expression = currentInput;
        } else {
            // Show full expression with operator and currentInput
            expression = firstOperand + " " + operator + " " + currentInput;
        }
        display.setText(expression);
    }

    private void onOperatorClick(String op) {
        if (!currentInput.isEmpty()) {
            if (!operator.isEmpty()) {
                // If operator already exists, calculate previous expression first
                onEqualsClick();
            }
            firstOperand = Double.parseDouble(currentInput);
            operator = op;
            currentInput = ""; // Reset for second operand input
            expression = firstOperand + " " + operator + " ";
            display.setText(expression);
        } else if (!operator.isEmpty()) {
            // Allow changing operator without inputting second operand
            operator = op;
            expression = firstOperand + " " + operator + " ";
            display.setText(expression);
        }
    }

    private void onEqualsClick() {
        if (!currentInput.isEmpty() && !operator.isEmpty()) {
            secondOperand = Double.parseDouble(currentInput);
            double result = 0;

            switch (operator) {
                case "+":
                    result = firstOperand + secondOperand;
                    break;
                case "-":
                    result = firstOperand - secondOperand;
                    break;
                case "*":
                    result = firstOperand * secondOperand;
                    break;
                case "/":
                    if (secondOperand != 0) {
                        result = firstOperand / secondOperand;
                    } else {
                        display.setText("Error: Div by 0");
                        resetAll();
                        return;
                    }
                    break;
            }

            // Show result only
            display.setText(String.valueOf(result));

            // Prepare for next input
            currentInput = String.valueOf(result);
            operator = "";
            expression = currentInput;
            firstOperand = result;
        }
    }

    private void onClearClick() {
        resetAll();
        display.setText("0");
    }

    private void resetAll() {
        currentInput = "";
        operator = "";
        firstOperand = 0;
        secondOperand = 0;
        expression = "";
        isOperatorClicked = false;
    }
}


Mainactivity.xml


<?xml version="1.0" encoding="utf-8"?>
<androidx.appcompat.widget.LinearLayoutCompat xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="16dp"
    tools:context=".MainActivity">

    <!-- Display Section -->
    <TextView
        android:id="@+id/display"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:gravity="end|center_vertical"
        android:text="0"
        android:textSize="48sp"
        android:textColor="@android:color/black"
        android:background="#EDE7F6"
        android:padding="16dp"
        android:layout_marginBottom="20dp" />

    <!-- GridLayout for Buttons -->
    <androidx.gridlayout.widget.GridLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        app:columnCount="4"
        app:rowCount="5"
        android:layout_marginTop="10dp"
        android:layout_gravity="center">

        <!-- Button 0 to 9 -->

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="1"
            app:layout_column="0"
            app:layout_row="0" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="2"
            app:layout_column="1"
            app:layout_row="0" />

        <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="3"
            app:layout_column="2"
            app:layout_row="0" />

        <Button
            android:id="@+id/button4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="4"
            app:layout_column="0"
            app:layout_row="1" />

        <Button
            android:id="@+id/button5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="5"
            app:layout_column="1"
            app:layout_row="1" />

        <Button
            android:id="@+id/button6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="6"
            app:layout_column="2"
            app:layout_row="1" />

        <Button
            android:id="@+id/button7"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="7"
            app:layout_column="0"
            app:layout_row="2" />

        <Button
            android:id="@+id/button8"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="8"
            app:layout_column="1"
            app:layout_row="2" />

        <Button
            android:id="@+id/button9"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="9"
            app:layout_column="2"
            app:layout_row="2" />

        <!-- Operator Buttons -->
        <Button
            android:id="@+id/buttonplus"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="+"
            app:layout_column="3"
            app:layout_row="0" />

        <Button
            android:id="@+id/buttonminus"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="-"
            app:layout_column="3"
            app:layout_row="1" />

        <Button
            android:id="@+id/buttonmul"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="*"
            app:layout_column="3"
            app:layout_row="2" />

        <Button
            android:id="@+id/buttondivide"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="/"
            app:layout_column="3"
            app:layout_row="3" />

        <!-- Clear and Equal Buttons -->
        <Button
            android:id="@+id/buttonC"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="C"
            app:layout_column="0"
            app:layout_row="3" />

        <Button
            android:id="@+id/buttonequals"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="="
            app:layout_column="2"
            app:layout_row="3" />

        <Button
            android:id="@+id/button0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="0"
            app:layout_column="1"
            app:layout_row="3" />

    </androidx.gridlayout.widget.GridLayout>

</androidx.appcompat.widget.LinearLayoutCompat>

